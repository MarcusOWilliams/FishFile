{% extends "base.html" %}

{% block content %}
    <h2>{{user.first_name}} {{user.last_name}}</h2>
    <p>Email: <a href="mailto:{{user.email}}">{{user.email}}</a></p>

    {%if user == current_user %}
        <p><a href="{{url_for('main.settings')}}">Account settings</a></p>
    {%endif%}

    {%if current_user.isAdmin and current_user != user%}
        <p>Current role: {{user.role}}</p>
        <form action="" method="post">
            {{ roleForm.hidden_tag() }}
            {{roleForm.role.label}} {{ roleForm.role() }} {{roleForm.submit()}}
        </form>
    {%endif%}

    {% if user_fish %}
        
        <br>
        <b>Fish {{user.first_name}} is working on:</b>
        <div id = "fishList">
            {%for fish in user_fish%}
                {%include 'subtemplates/_fish.html'%}
            {%endfor%}
        </div>
    {%endif%}
    {% if changes %}
        <p>Changes made by {{user.first_name}}:</p>
            {%for change in changes%}
                {%include 'subtemplates/_change.html'%}
            {%endfor%}
            <div id="pageNavigation">
                <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center">
                        <li class=" page-item {% if not prev_url %} disabled{% endif %}">
                            <a class=" page-link" href="{{ prev_url or '#' }}">
                                <span aria-hidden="true">&larr;</span> Page
                            </a>
                        </li>
                        {% for page in pagination.iter_pages(1,2,3,1) %}
                            {% if page %}
                                {% if page != pagination.page %}
                                    <li class = "page-item"><a class = "page-link" href="{{url_for('main.user',username=user.username, page=page)}}">{{ page }}</a></li>
                                {% else %}
                                    <li class="page-item active"><a class = "page-link">{{ page }}</a></li>
                                {% endif %}
                            {% else %}
                                <li class="page-item disabled"><a class = "page-link" >â€¦</a></li>
                            {% endif %}
                        {% endfor %}
                        <li class="page-item {% if not next_url %} disabled{% endif %}">
                            <a class=" page-link" href="{{ next_url or '#' }}">
                                Next<span aria-hidden="true">&rarr;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
    {%endif%}


   

    


{%endblock%}